const tingle=require("tingle.js");function showModal(e,t){this.modal=new tingle.modal({footer:!0,stickyFooter:!1,closeMethods:["button"],closeLabel:"Close",cssClass:["custom-class-1","custom-class-2"],onOpen:()=>{},onClose:()=>{},beforeClose:()=>!0});const i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");o.className="client_logo",s.className="client_logo_inner";const a=document.createElement("div");a.setAttribute("class","iframeWrap"),this.iframe=document.createElement("iframe"),this.iframe.src=e+"?full=1",this.iframe.name="frame",this.iframe.setAttribute("allowFullScreen",""),this.iframe.allowFullScreen=!0,this.iframe.width=340,this.iframe.setAttribute("frameborder","0"),this.iframe.scrolling="no",this.iframe.allowtransparency=!0,this.iframe.seamless=!0,a.appendChild(this.iframe);const l=document.createElement("img");l.setAttribute("src",t),l.setAttribute("alt","Logo"),s.appendChild(l),o.appendChild(s),i.appendChild(o),i.appendChild(a),this.modal.setContent(i),this.modal.addFooterBtn("&times;","tingle-modal__close",()=>{this.modal.close()}),this.modal.open()}function listenEvent(e){window.addEventListener("message",t=>{if(void 0!==t.data){let i;try{i=JSON.parse(t.data)}catch(t){}i&&void 0!==i.status&&"success"===i.status&&(void 0!==i.url&&(-1!==i.url.indexOf("http")?window.location.href=i.url:(i=JSON.parse(i.data),document.write(i.data.url))),void 0!==i.type&&("redirect"!==i.type&&"gw_redirect"!==i.type||(window.location.href=i.url)),void 0!==i.type&&("otp"===i.type?(this.modal.close(),document.open(),document.write(i.data),document.close()):this.isMobile&&(window.location.href=e)),void 0!==i.type&&"resize"===i.type&&void 0!==i.height&&i.height>100&&(this.isMobile?this.iframe.style.minHeight=window.outerHeight-100+"px":this.iframe.height=i.height))}},!1)}const easyCheckout=(e,t)=>{listenEvent(e),showModal(e,t)};export default easyCheckout;
