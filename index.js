import tingle from"tingle.js";function showModal(e,t){const o=new tingle.modal({footer:!0,stickyFooter:!1,closeMethods:["button"],closeLabel:"Close",cssClass:["custom-class-1","custom-class-2"],onOpen:()=>{},onClose:()=>{},beforeClose:()=>!0}),n=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");i.className="client_logo",l.className="client_logo_inner";const s=document.createElement("div");s.setAttribute("class","iframeWrap");const a=document.createElement("iframe");a.src=e+"?full=1",a.name="frame",a.setAttribute("allowFullScreen",""),a.allowFullScreen=!0,a.width=340,a.setAttribute("frameborder","0"),a.scrolling="no",a.allowtransparency=!0,a.seamless=!0,s.appendChild(a);const c=document.createElement("img");return c.setAttribute("src",t),c.setAttribute("alt","Logo"),l.appendChild(c),i.appendChild(l),n.appendChild(i),n.appendChild(s),o.setContent(n),o.addFooterBtn("&times;","tingle-modal__close",()=>{o.close()}),o.open(),o}function listenEvent(e,t,o,n){window.addEventListener("message",i=>{if(void 0!==i.data){let l;try{l=JSON.parse(i.data)}catch(i){}if(l&&void 0!==l.status&&"success"===l.status){if(void 0!==l.url&&(-1!==l.url.indexOf("http")?window.location.href=l.url:(l=JSON.parse(l.data),document.write(l.data.url))),void 0!==l.type&&("redirect"!==l.type&&"gw_redirect"!==l.type||(window.location.href=l.url)),void 0!==l.type)if("otp"===l.type){t.close();try{o?(document.open(),document.write(l.data),document.close()):(l=JSON.parse(l.data),document.write(l.data.url))}catch(i){document.write(l.data)}document.close()}else n&&(window.location.href=e);void 0!==l.type&&"resize"===l.type&&void 0!==l.height&&l.height>100&&(this.isMobile?iframe.style.minHeight=window.outerHeight-100+"px":iframe.height=l.height)}}},!1)}const easyCheckout=(e,t,o=!1,n=!1)=>{listenEvent(e,showModal(e,t,o,n),o,n)};export default easyCheckout;
