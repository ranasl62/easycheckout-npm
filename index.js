import tingle from"tingle.js";function showModal(e,t){const o=new tingle.modal({footer:!0,stickyFooter:!1,closeMethods:["button"],closeLabel:"Close",cssClass:["custom-class-1","custom-class-2"],onOpen:()=>{},onClose:()=>{},beforeClose:()=>!0}),n=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div");l.className="client_logo",s.className="client_logo_inner";const a=document.createElement("div");a.setAttribute("class","iframeWrap");const i=document.createElement("iframe");i.src=e+"?full=1",i.name="frame",i.setAttribute("allowFullScreen",""),i.allowFullScreen=!0,i.width=340,i.setAttribute("frameborder","0"),i.scrolling="no",i.allowtransparency=!0,i.seamless=!0,a.appendChild(i);const c=document.createElement("img");return c.setAttribute("src",t),c.setAttribute("alt","Logo"),s.appendChild(c),l.appendChild(s),n.appendChild(l),n.appendChild(a),o.setContent(n),o.addFooterBtn("&times;","tingle-modal__close",()=>{o.close()}),o.open(),[o,i]}function listenEvent(e,t,o,n,l){window.addEventListener("message",s=>{if(void 0!==s.data){let a;try{a=JSON.parse(s.data)}catch(s){}if(a&&void 0!==a.status&&"success"===a.status){if(void 0!==a.url&&(-1!==a.url.indexOf("http")?window.location.href=a.url:(a=JSON.parse(a.data),document.write(a.data.url))),void 0!==a.type&&("redirect"!==a.type&&"gw_redirect"!==a.type||(window.location.href=a.url)),void 0!==a.type)if("otp"===a.type){t.close();try{n?(document.open(),document.write(a.data),document.close()):(a=JSON.parse(a.data),document.write(a.data.url))}catch(s){document.write(a.data)}document.close()}else l&&(window.location.href=e);void 0!==a.type&&"resize"===a.type&&void 0!==a.height&&a.height>100&&(l?o.style.minHeight=window.outerHeight-100+"px":o.height=a.height)}}},!1)}const easyCheckout=(e,t,o=!1,n=!1)=>{const l=showModal(e,t,o,n);listenEvent(e,l[0],l[1],o,n)};export default easyCheckout;
